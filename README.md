# RCS-Lite AGV智能仿真系统 v7.0

## 项目概述

基于PyQt5的AGV智能仿真系统，支持电量管理、订单调度、死锁检测与避让等功能。

## 主要功能

### 电量管理
- AGV初始电量100%
- 运行消耗：0.2%/秒（载货时0.3%/秒）
- 空闲消耗：0.05%/秒
- 充电速度：2%/秒
- 低于30%自动寻找充电点
- 智能充电点分配，避免拥堵

### 订单系统
- 从上料点(PP)到下料点(AP)的运输任务
- 上下料时间：3-10秒随机
- 订单状态跟踪和详细计时
- 各阶段耗时记录：等待分配、移动、装货、运输、卸货

### 调度系统
- 自动分配订单给空闲AGV
- 优先选择电量充足、距离近的AGV
- 空闲AGV自动前往充电，避免堵塞主干道

### 死锁检测与避让
- **相向检测**：自动检测相向而行的AGV
- **优先级规则**：
  - 载货AGV优先于空载
  - 低电量AGV优先于高电量
  - ID小的AGV优先（平局决定）
- **临时让路**：低优先级AGV自动让路
- **智能充电分配**：避免多AGV同时前往同一充电点

### 路径规划
- A*算法优化路径
- 考虑节点占用状态
- 动态避障

## 使用说明

### 基本操作
- 滚轮：缩放地图
- 右键拖拽：平移地图
- 左键点击AGV：查看属性

### 订单管理
- 点击"创建订单"：手动创建新订单
- 点击"自动订单"：系统自动生成订单
- 订单会自动分配给合适的AGV

### 节点类型
- 灰色：普通节点
- 绿色：上料点(PP)
- 红色：下料点(AP)
- 金色：充电点(CP)
- 橙色：管控区节点

## 运行环境

- Python 3.7+
- PyQt5
- pandas
- sqlite3

## 启动方法

```bash
python main.py
```

## 系统特点

1. **智能调度**：根据电量、距离、载货状态综合调度
2. **死锁预防**：自动检测并解决AGV相向死锁
3. **时间统计**：详细记录订单各阶段耗时
4. **充电管理**：智能分配充电点，避免拥堵